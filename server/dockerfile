FROM node:alpine as build

COPY package.json .

RUN npm install

COPY . .

RUN npm run buildnode

FROM build as production

COPY ./build/node/index.js .
COPY node_modules .
COPY prisma .

RUN npx prisma generate

EXPOSE 8000
ENTRYPOINT [ "node", "index.js" ]
